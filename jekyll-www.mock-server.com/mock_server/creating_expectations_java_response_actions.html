---
title: Response Actions - Java
layout: page
pageOrder: 4.08
section: 'Mock Server'
subsection: false
---

<p>When mocking a response in Java use the <strong>org.mockserver.model.HttpResponse</strong> class which specifies the details of each HTTP response with a fluent API, for example:</p>

<pre><code class="code">HttpResponse httpResponse =
        response()
                .withStatusCode(<span class="numeric_literal">401</span>)
                .withHeaders(
                        <span class="keyword">new</span> Header(<span class="string_literal">"Content-Type"</span>, <span class="string_literal">"application/json; charset=utf-8"</span>),
                        <span class="keyword">new</span> Header(<span class="string_literal">"Cache-Control"</span>, <span class="string_literal">"public, max-age=86400"</span>)
                )
                .withBody(<span class="string_literal">"{ message: 'incorrect username and password combination' }"</span>)
                .withDelay(<span class="keyword">new</span> Delay(TimeUnit.<span class="constant">SECONDS</span>, <span class="numeric_literal">1</span>))
                .withConnectionOptions(
                        <span class="keyword">new</span> ConnectionOptions()
                                .withKeepAliveOverride(<span class="keyword">true</span>)
                                .withCloseSocket(<span class="keyword">true</span>)
                );
</code></pre>

<a name="connection_options" class="anchor" href="#connection_options">&nbsp;</a>

<p>To control whether the socket is closed after the response has been sent or headers such as <span class="string_literal">"Connection"</span> or <span class="string_literal">"Content-Length"</span> the <strong>org.mockserver.model.ConnectionOptions</strong> class can be used.</p>

<p>For example:</p>

<pre><code class="code">HttpResponse httpResponse =
        response()
                .withStatusCode(<span class="numeric_literal">401</span>)
                .withHeaders(
                        <span class="keyword">new</span> Header(<span class="string_literal">"Content-Type"</span>, <span class="string_literal">"application/json; charset=utf-8"</span>),
                        <span class="keyword">new</span> Header(<span class="string_literal">"Cache-Control"</span>, <span class="string_literal">"public, max-age=86400"</span>)
                )
                .withBody(<span class="string_literal">"{ message: 'incorrect username and password combination' }"</span>)
                .withDelay(<span class="keyword">new</span> Delay(TimeUnit.<span class="constant">SECONDS</span>, <span class="numeric_literal">1</span>))
                .withConnectionOptions(
                        <span class="keyword">new</span> ConnectionOptions()
                                .withKeepAliveOverride(<span class="keyword">true</span>)
                                .withCloseSocket(<span class="keyword">true</span>)
                );
</code></pre>
